dist: bionic
language: python
jobs:
  include:
  - os: linux
    python: 3.6
    sudo: true
    env: 
      - BUILD=PYPI
  - os: linux
    python: 3.7
    sudo: true
  - os: linux
    python: 3.8
    sudo: true
    - os: linux
    python: 3.9
    sudo: true
install:
- pip install -r requirements/test.txt
- pip install pytest-cov
script:
- flake8
- pytest
after_success:
- bash <(curl -s https://codecov.io/bash)


deploy:
  - provider: pypi
    skip_cleanup: true
    skip_existing: true
    user: __token__
    password:
      secure: p1hOxjAB/Y3pXSKDgyzcxOMgmi+o/9txkJFxczygLXh5LrTfStLjm6Lzsqd+tfbSJ8OGfkeYMa6Gtujv3V2abc97VgKoXTrcuRt9JBTVwa/I9OAWxwhMr/HlIoXt9gZQKbBnPG2dFe8OLDZloHNvoZQHb5psS4pTZdGagTtXkfwQv+ANrPVEgfqnB3d5Eo7j1Ffv3H+calcX9+BwL9eJerof7URAe7nfYxDdj+KWZuFKD8dgKcaiVnikKBPwAUUcQmYT20gQYvLtav8XpE86AfsrpGiFYl+PrnMzLGifiGyYTGv3h5u5764Lqs1xIEWOqzozLbOrZGb2JU2v0B+tXNI69ty7Rhp6A/01Yi4wT0EqsVHc8+jXfNwdBPy8ChavZkSK+N9HOSue4ekEh+oaBa0uOWFVbBKtVAHyqPfUfRibseDbGPzT1+gz3gTpS5Imo+UWWPImQb0DhUeyAuuTV/J44o9f/9Cw/fEc7BX+bHPF33QNo2aT23ApswwoJPVYq3Cn8J9w7aYdGJqTkxtMJfgqjlP5mX/w5m6eXbwJBDl+PxXv4liIOrUJM2dkBFNHwoaY1xFx4KJgYqn+ponz5umODINikJBn/unqM7aq7jGjykolV2zJq0s+zS/tUF71xbL6IHDemQO596c2/XiuYDBCA2Irdc3TErwGS/9tkOA=
    on:
      tags: true
      all_branches: true
      distributions: sdist
      condition: "$BUILD = PYPI"
      repo: cloudblue/connect-markdown-renderer
